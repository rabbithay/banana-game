<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Banana Game</title>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script src="bundle.js"></script>
    <canvas id="canvas" onmousemove="mouseMove(event)"> </canvas>
    <div style="display: none">
      <img id="alien" src="assets/alien.png" width="64" height="97" />
      <img id="bomb" src="assets/bomb.png" width="67" height="67" />
    </div>

    <script>
      const canvas = document.querySelector("#canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let gameLoopInterval;

      let player = {
        x: 0,
        y: window.innerHeight - 120,
      };

      let enemy = {
        x: window.innerWidth * Math.random(),
        y: 0,
        speed: 2,
      };

      const context = canvas.getContext("2d");

      function drawAlien() {
        context.drawImage(alien, player.x, player.y);
      }

      function drawBomb() {
        context.drawImage(bomb, enemy.x, enemy.y);
      }

      function dropBomb() {
        enemy.y += enemy.speed;
      }

      function clearScreen() {
        context.clearRect(0, 0, canvas.width, canvas.height);
      }

      function mouseMove(event) {
        player.x = event.clientX;
      }

      function checkCollision() {
        const distance = Math.sqrt(
          Math.pow(player.x - enemy.x, 2) + Math.pow(player.y - enemy.y, 2)
        );
        return distance < 30 + 30;
      }

      function gameLoop() {
        clearScreen();
        drawAlien();
        drawBomb();
        dropBomb();

        if (checkCollision()) {
          clearInterval(gameLoopInterval);
          alert("VocÃª perdeu!");
        }
      }

      gameLoopInterval = setInterval(() => {
        gameLoop();
      }, 1000 / 120);
    </script>
  </body>
</html>
